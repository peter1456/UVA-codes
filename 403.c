#include<stdio.h>
#include<string.h>

int paper[60][60];
const char* c[26][5] = { 
    "\0***\0", "*\0\0\0*", "*****", "*\0\0\0*", "*\0\0\0*",
    "****\0", "*\0\0\0*", "****\0", "*\0\0\0*", "****\0",
    "\0****", "*\0\0\0*", "*\0\0\0\0", "*\0\0\0\0", "\0****",
    "****\0", "*\0\0\0*", "*\0\0\0*", "*\0\0\0*", "****\0",
    "*****", "*\0\0\0\0", "***\0\0", "*\0\0\0\0", "*****",
    "*****", "*\0\0\0\0", "***\0\0", "*\0\0\0\0", "*\0\0\0\0",
    "\0****", "*\0\0\0\0", "*\0\0**", "*\0\0\0*", "\0***\0",
    "*\0\0\0*", "*\0\0\0*", "*****", "*\0\0\0*", "*\0\0\0*",
    "*****", "\0\0*\0\0", "\0\0*\0\0", "\0\0*\0\0", "*****",
    "\0\0***", "\0\0\0*\0", "\0\0\0*\0", "*\0\0*\0", "\0**\0\0",
    "*\0\0\0*", "*\0\0*\0", "***\0\0", "*\0\0*\0", "*\0\0\0*",
    "*\0\0\0\0", "*\0\0\0\0", "*\0\0\0\0", "*\0\0\0\0", "*****",
    "*\0\0\0*", "**\0**", "*\0*\0*", "*\0\0\0*", "*\0\0\0*",
    "*\0\0\0*", "**\0\0*", "*\0*\0*", "*\0\0**", "*\0\0\0*",
    "\0***\0", "*\0\0\0*", "*\0\0\0*", "*\0\0\0*", "\0***\0",
    "****\0", "*\0\0\0*",  "****\0", "*\0\0\0\0", "*\0\0\0\0",
    "\0***\0", "*\0\0\0*", "*\0\0\0*", "*\0\0**", "\0****",
    "****\0", "*\0\0\0*", "****\0", "*\0\0*\0", "*\0\0\0*",
    "\0****", "*\0\0\0\0", "\0***\0", "\0\0\0\0*",  "****\0",
    "*****", "*\0*\0*", "\0\0*\0\0", "\0\0*\0\0", "\0***\0",
    "*\0\0\0*", "*\0\0\0*", "*\0\0\0*", "*\0\0\0*", "\0***\0",
    "*\0\0\0*", "*\0\0\0*", "\0*\0*\0", "\0*\0*\0", "\0\0*\0\0",
    "*\0\0\0*", "*\0\0\0*", "*\0*\0*", "**\0**", "*\0\0\0*",
    "*\0\0\0*", "\0*\0*\0", "\0\0*\0\0", "\0*\0*\0", "*\0\0\0*",
    "*\0\0\0*", "\0*\0*\0", "\0\0*\0\0", "\0\0*\0\0", "\0\0*\0\0",
    "*****", "\0\0\0*\0", "\0\0*\0\0", "\0*\0\0\0", "*****"
 };

void typec5(int row, int col, char* s){
    int i, j, k;
    for (i = 0; i < strlen(s) - 2; i++){
        for (j = 0; j < 5; j++){
            for (k = 0; k < 5; k++){
                if (row + k - 1 < 60 && col + 6 * i + j - 1 < 60 && !paper[row + k - 1][col + 6 * i + j - 1] && s[i + 1] != ' ')
                    paper[row + k - 1][col + 6 * i + j - 1] = c[s[i + 1] - 'A'][j][k];
            }
        }
    }
}

void typec1(int row, int col, char* s){
    int i, j;
    for (i = 0; i < strlen(s) - 2; i++){
        if (s[i + 1] != ' '){
            paper[row - 1][col + i - 1] = s[i + 1];
        }
    }
}

int main(){
    char command[5], str[70], font[5];
    int row, col, i, j;
    while(scanf("%s", command) != EOF){
        if (!strcmp(command, ".EOP")){
            for(i = 0; i < 60; i++){
                for(j = 0; j < 60; j++){
                    putchar(paper[i][j] ? paper[i][j] : '.');
                }
                putchar('\n');
            }
            putchar('\n');
            for(i = 0; i < 60; i++){
                putchar('-');
            }
            putchar('\n');
            memset(paper, 0, sizeof(paper));
        } else {
            scanf("%s %d", font, &row);
            if (command[1] == 'P')
                scanf("%d", &col);
            scanf("%s", str);
            switch (command[1]){
                case 'C':
                    if (font[1] == '1'){
                        col = 31 - (strlen(str) - 2) / 2;
                        typec1(row, col, str);
                    } else {
                        col = 31 - (strlen(str) - 2) * 3;
                        typec5(row, col, str);
                    }
                    break;
                case 'P':
                    if (font[1] == '1'){
                        typec1(row, col, str);
                    } else {
                        typec5(row, col, str);
                    }
                    break;
                case 'L':
                    if (font[1] == '1'){
                        col = 
                    }
                    break;
                case 'R':
                    break;
            }
        }
    }
    return 0;
}